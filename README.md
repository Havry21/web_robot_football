# web_robot_football

## Структура проекта


```
web_robot_football 
├── app.py              точка входа, место обмена данными между модулями, сайт на flask
├── Joystick.py         обработка данных с джойстика 
├── udpSender.py        общение по udp с роботами
├── Robot.py            структура данных для робота и формирования json для сервера
├── templates 
│       └── index.html 
├── static 
|       ├── css 
│       |  └── style.css 
│       └── js 
│           └── myScript.js 
└── README.md
```

---

## Сообщения для обмена

В сети находится **две rpi** и **10 esp32**. Esp32 имеет собственный внутренний адрес, 
который определяет принадлежность ее к команде(_1 ... 5 - первая команда, 6 ... 10 - вторая команда_). 

У esp программно заданы порты которые она слушает, и на которые будет отправлять сообщения. 
Конкретный порт выбирается в зависимости от команды. 
Т.е. esp знает порты обоих rpi но слушает и отправляет только той, которой принадлежит.
Порт для первой команды -  `5005`, для второй - `5006`

### Таблица сообщений

<table>
    <tr>
        <th> - </th>
        <th>0</th>
        <th>1</th>
        <th>2</th>
        <th>3</th>
    </tr>
    <tr>
        <td>msg1</td>
        <td>1</td>
    </tr>
    <tr>
        <td>msg2</td>
        <td>address (uint8_t)</td>
        <td>battery percent (uint8_t)</td>
    </tr>
    <tr>
        <td>msg2</td>
        <td>motorSpeed1 (int8_t)</td>
        <td>motorSpeed2 (int8_t)</td>
        <td>motorSpeed3 (int8_t)</td>
        <td>kicker(uint8_t)</td>
    </tr>
</table>

